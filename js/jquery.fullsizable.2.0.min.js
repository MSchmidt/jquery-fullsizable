/*
jQuery fullsizable plugin v2.0 <https://github.com/MSchmidt/jquery-fullsizable>
  - take full available browser space to show images

(c) 2011-2014 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var e,n,t,l,u,i,r,o,c,f,d,s,a,h,p,g,m,b,w,v,z,_,k,F,S,x;e=jQuery;i="#jquery-fullsizable";f="#fullsized_image_holder";k="fullsized_spinner";n=e('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>');d=[];r=0;g=null;F=null;v=function(){var n;n=d[r];if(n.ratio==null){n.ratio=(n.naturalHeight/n.naturalWidth).toFixed(2)}if(e(window).height()/n.ratio>e(window).width()){e(n).width(e(window).width());e(n).height(e(window).width()*n.ratio);return e(n).css("margin-top",(e(window).height()-e(n).height())/2)}else{e(n).height(e(window).height());e(n).width(e(window).height()/n.ratio);return e(n).css("margin-top",0)}};s=function(e){if(e.keyCode===27){u()}if(e.keyCode===37){w(true)}if(e.keyCode===39){return h(true)}};w=function(e){if(e==null){e=false}if(r>0){return _(d[r-1],-1,e)}};h=function(e){if(e==null){e=false}if(r<d.length-1){return _(d[r+1],1,e)}};_=function(n,t,l){if(t==null){t=1}if(l==null){l=false}r=n.index;e(f).hide();e(f).html(n);if(g.navigation){if(l===true){c()}else{z()}}if(n.loaded!=null){e(i).removeClass(k);v();e(f).fadeIn("fast");return m(t)}else{e(i).addClass(k);n.onload=function(){v();e(f).fadeIn("slow",function(){return e(i).removeClass(k)});this.loaded=true;return m(t)};return n.src=n.buffer_src}};m=function(e){var n;if(e===1&&r<d.length-1){n=d[r+1]}else if((e===-1||r===d.length-1)&&r>0){n=d[r-1]}else{return}n.onload=function(){return this.loaded=true};if(n.src===""){return n.src=n.buffer_src}};p=function(l){e("body").append(n);e(window).bind("resize",v);_(l);return e(i).hide().fadeIn(function(){if(g.detach_id!=null){F=e(window).scrollTop();e("#"+g.detach_id).css("display","none");v()}t();return e(document).trigger("fullsizable:opened")})};u=function(){if(g.detach_id!=null){e("#"+g.detach_id).css("display","block");e(window).scrollTop(F)}e(i).fadeOut(function(){return n.remove()});l();e(i).removeClass(k);x();return e(window).unbind("resize",v)};a=function(){d.length=0;return e(g.selector).each(function(){var n;n=new Image;n.buffer_src=e(this).attr("href");n.index=d.length;d.push(n);if(g.openOnClick){return e(this).click(function(e){e.preventDefault();if(g.reloadOnOpen){a()}return p(n)})}})};b=function(){if(g.navigation){n.append('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>');e(document).on("click","#fullsized_go_prev",function(e){e.preventDefault();e.stopPropagation();return w()});e(document).on("click","#fullsized_go_next",function(e){e.preventDefault();e.stopPropagation();return h()})}if(g.closeButton){n.append('<a id="fullsized_close" href="#close"></a>');e(document).on("click","#fullsized_close",function(e){e.preventDefault();e.stopPropagation();return u()})}if(g.fullscreenButton&&o()){n.append('<a id="fullsized_fullscreen" href="#fullscreen"></a>');e(document).on("click","#fullsized_fullscreen",function(e){e.preventDefault();e.stopPropagation();return S()})}switch(g.clickBehaviour){case"close":return e(document).on("click",i,u);case"next":return e(document).on("click",i,function(){return h(true)})}};t=function(){e(document).bind("keydown",s);e(document).bind("fullsizable:next",function(){return h(true)});e(document).bind("fullsizable:prev",function(){return w(true)});return e(document).bind("fullsizable:close",u)};x=function(){e(document).unbind("keydown",s);e(document).unbind("fullsizable:next");e(document).unbind("fullsizable:prev");return e(document).unbind("fullsizable:close")};c=function(){n.find("a").toggle(false);return n.bind("mousemove",z)};z=function(){n.unbind("mousemove",z);e("#fullsized_close, #fullsized_fullscreen").toggle(true);e("#fullsized_go_prev").toggle(r!==0);return e("#fullsized_go_next").toggle(r!==d.length-1)};e.fn.fullsizable=function(n){g=e.extend({selector:this.selector,detach_id:null,navigation:true,closeButton:true,fullscreenButton:true,openOnClick:true,clickBehaviour:"close",preload:true,reloadOnOpen:false},n||{});b();if(g.preload){a()}e(document).bind("fullsizable:reload",a);e(document).bind("fullsizable:open",function(n,t){var l,u,i,r;if(g.reloadOnOpen){a()}r=[];for(u=0,i=d.length;u<i;u++){l=d[u];if(l.buffer_src===e(t).attr("href")){r.push(p(l))}else{r.push(void 0)}}return r});return this};o=function(){var e;e=n.get(0);if(e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen){return true}else{return false}};l=function(){return S(true)};S=function(e){var t;t=n.get(0);if(t.requestFullScreen){if(document.fullScreen||e){return document.exitFullScreen()}else{return t.requestFullScreen()}}else if(t.webkitRequestFullScreen){if(document.webkitIsFullScreen||e){return document.webkitCancelFullScreen()}else{return t.webkitRequestFullScreen()}}else if(t.mozRequestFullScreen){if(document.mozFullScreen||e){return document.mozCancelFullScreen()}else{return t.mozRequestFullScreen()}}}}).call(this);
