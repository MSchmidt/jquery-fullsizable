
/*
 jQuery fullsizable plugin v2.1.0 <https://github.com/MSchmidt/jquery-fullsizable>
 (c) 2011-2015 Matthias Schmidt <http://m-schmidt.eu/>
 */
(function(){var e,k,i,y,q,f,o,l,x,S,h,t,w,d,v,c,s,m,n,b,F,p,r,z,u,a,g,_,C;e=jQuery,o="#jquery-fullsizable",h="#fullsized_image_holder",a="fullsized_spinner",i=e('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>'),k=e('<div id="fullsized_caption"></div>'),t=[],l=0,n=null,g=null,r=function(){var n;return n=t[l],null==n.ratio&&(n.ratio=(n.naturalHeight/n.naturalWidth).toFixed(2)),e(window).height()/n.ratio>e(window).width()?(e(n).width(e(window).width()),e(n).height(e(window).width()*n.ratio),e(n).css("margin-top",(e(window).height()-e(n).height())/2)):(e(n).height(e(window).height()),e(n).width(e(window).height()/n.ratio),e(n).css("margin-top",0))},w=function(e){return 27===e.keyCode&&f(),37===e.keyCode&&p(!0),39===e.keyCode?s(!0):void 0},p=function(e){return null==e&&(e=!1),l>0?u(t[l-1],-1,e):n.loop?u(t[t.length-1],-1,e):void 0},s=function(e){return null==e&&(e=!1),l<t.length-1?u(t[l+1],1,e):n.loop?u(t[0],1,e):void 0},u=function(t,i,u){return null==i&&(i=1),null==u&&(u=!1),l=t.index,e(h).hide(),e(h).html(t),t.caption&&n.caption&&k.text(t.caption),n.navigation&&(u===!0?S():z()),null!=t.loaded?(e(o).removeClass(a),r(),e(h).fadeIn("fast"),b(i)):(e(o).addClass(a),t.onload=function(){return r(),e(h).fadeIn("slow",function(){return e(o).removeClass(a)}),this.loaded=!0,b(i)},t.src=t.buffer_src)},b=function(n){var e;if(1===n&&l<t.length-1)e=t[l+1];else{if(-1!==n&&l!==t.length-1||!(l>0))return;e=t[l-1]}return e.onload=function(){return this.loaded=!0},""===e.src?e.src=e.buffer_src:void 0},m=function(t,l){return e("body").append(i),e(window).bind("resize",r),u(t),e(o).hide().fadeIn(function(){return null!=n.detach_id&&(g=e(window).scrollTop(),e("#"+n.detach_id).css("display","none"),r()),y(),e(document).trigger("fullsizable:opened",l)})},f=function(){return null!=n.detach_id&&(e("#"+n.detach_id).css("display","block"),e(window).scrollTop(g)),e(o).fadeOut(function(){return i.remove()}),q(),e(o).removeClass(a),C(),e(window).unbind("resize",r)},d=function(){return t.length=0,e(n.selector).each(function(){var i,l;return l=new Image,i=e(this),l.buffer_src=i.attr("href"),l.index=t.length,n.caption&&(l.caption=i.data("caption")||i.children("img:first").attr("title")),t.push(l),n.openOnClick?i.click(function(e){return e.preventDefault(),n.reloadOnOpen&&d(),m(l,this)}):void 0})},F=function(){switch(n.navigation&&(i.append('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>'),e(document).on("click","#fullsized_go_prev",function(e){return e.preventDefault(),e.stopPropagation(),p()}),e(document).on("click","#fullsized_go_next",function(e){return e.preventDefault(),e.stopPropagation(),s()})),n.closeButton&&(i.append('<a id="fullsized_close" href="#close"></a>'),e(document).on("click","#fullsized_close",function(e){return e.preventDefault(),e.stopPropagation(),f()})),n.fullscreenButton&&x()&&(i.append('<a id="fullsized_fullscreen" href="#fullscreen"></a>'),e(document).on("click","#fullsized_fullscreen",function(e){return e.preventDefault(),e.stopPropagation(),_()})),n.caption&&i.prepend(k),n.clickBehaviour){case"close":return e(document).on("click",o,f);case"next":return e(document).on("click",o,function(){return s(!0)});default:return e(document).on("click",o,n.clickBehaviour)}},y=function(){return e(document).bind("keydown",w),e(document).bind("fullsizable:next",function(){return s(!0)}),e(document).bind("fullsizable:prev",function(){return p(!0)}),e(document).bind("fullsizable:close",f)},C=function(){return e(document).unbind("keydown",w),e(document).unbind("fullsizable:next"),e(document).unbind("fullsizable:prev"),e(document).unbind("fullsizable:close")},S=function(){var e;return e=i.find("a"),e.is(":visible")===!0?(e.toggle(!1),i.bind("mousemove",v)):void 0},c=null,v=function(e){var n;return null===c&&(c=[e.clientX,e.clientY]),n=Math.round(Math.sqrt(Math.pow(c[1]-e.clientY,2)+Math.pow(c[0]-e.clientX,2))),n>=10?(i.unbind("mousemove",v),c=null,z()):void 0},z=function(){return e("#fullsized_close, #fullsized_fullscreen").toggle(!0),n.loop?(e("#fullsized_go_prev").show(),e("#fullsized_go_next").show()):(e("#fullsized_go_prev").toggle(0!==l),e("#fullsized_go_next").toggle(l!==t.length-1))},e.fn.fullsizable=function(l){return n=e.extend({selector:this.selector,detach_id:null,navigation:!0,closeButton:!0,fullscreenButton:!0,openOnClick:!0,clickBehaviour:"close",preload:!0,reloadOnOpen:!1,loop:!1,caption:!1},l||{}),F(),n.preload&&d(),e(document).bind("fullsizable:reload",d),e(document).bind("fullsizable:open",function(c,u){var l,o,r,i;for(n.reloadOnOpen&&d(),i=[],l=0,r=t.length;r>l;l++)o=t[l],o.buffer_src===e(u).attr("href")?i.push(m(o,u)):i.push(void 0);return i}),this},x=function(){var e;return e=i.get(0),e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen?!0:!1},q=function(){return _(!0)},_=function(n){var e;return e=i.get(0),e.requestFullScreen?document.fullScreen||n?document.exitFullScreen():e.requestFullScreen():e.webkitRequestFullScreen?document.webkitIsFullScreen||n?document.webkitCancelFullScreen():e.webkitRequestFullScreen():e.mozRequestFullScreen?document.mozFullScreen||n?document.mozCancelFullScreen():e.mozRequestFullScreen():void 0}}).call(this);