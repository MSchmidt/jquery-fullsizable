/*
jQuery fullsizable plugin v2.1.0 <https://github.com/MSchmidt/jquery-fullsizable>
(c) 2011-2015 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var b,m,f,A,B,n,c,C,D,d,t,p,u,k,q,v,e,w,E,r,h,x,l,y,z,F;b=jQuery;f=b('<div id="jquery-fullsizable"><div id="fullsized_wrapper"><div id="fullsized_holder"><div id="fullsized_image_holder"></div></div></div></div>');m=b('<div id="fullsized_caption_holder"></div>');d=[];c=0;y=e=null;h=function(){var a;a=d[c];null==a.ratio&&(a.ratio=(a.naturalHeight/a.naturalWidth).toFixed(2));if(b(window).height()/a.ratio>b(window).width())return b(a).width(b(window).width()),b(a).height(b(window).width()*a.ratio),b(a).css("margin-top",(b(window).height()-b(a).height())/2);b(a).height(b(window).height());b(a).width(b(window).height()/a.ratio);return b(a).css("margin-top",0)};t=function(a){27===a.keyCode&&n();37===a.keyCode&&r(!0);if(39===a.keyCode)return q(!0)};r=function(a){null==a&&(a=!1);if(0<c)return l(d[c-1],-1,a);if(e.loop)return l(d[d.length-1],-1,a)};q=function(a){null==a&&(a=!1);if(c<d.length-1)return l(d[c+1],1,a);if(e.loop)return l(d[0],1,a)};l=function(a,g,d){null==g&&(g=1);null==d&&(d=!1);c=a.index;b("#fullsized_image_holder").hide();b("#fullsized_image_holder").html(a);e.caption&&a.caption&&m.html(a.caption);e.navigation&&(!0===d?D():x());if(null!=a.loaded)return b("#jquery-fullsizable").removeClass("fullsized_spinner"),h(),b("#fullsized_image_holder").fadeIn("fast"),w(g);b("#jquery-fullsizable").addClass("fullsized_spinner");a.onload=function(){h();b("#fullsized_image_holder").fadeIn("slow",function(){return b("#jquery-fullsizable").removeClass("fullsized_spinner")});this.loaded=!0;return w(g)};return a.src=a.buffer_src};w=function(a){if(1===a&&c<d.length-1)a=d[c+1];else if((-1===a||c===d.length-1)&&0<c)a=d[c-1];else return;a.onload=function(){return this.loaded=!0};if(""===a.src)return a.src=a.buffer_src};v=function(a,d){b("body").append(f);b(window).bind("resize",h);l(a);return b("#jquery-fullsizable").hide().fadeIn(function(){null!=e.detach_id&&(y=b(window).scrollTop(),b("#"+e.detach_id).css("display","none"),h());A();return b(document).trigger("fullsizable:opened",d)})};n=function(){null!=e.detach_id&&(b("#"+e.detach_id).css("display","block"),b(window).scrollTop(y));b("#jquery-fullsizable").fadeOut(function(){return f.remove()});B();b("#jquery-fullsizable").removeClass("fullsized_spinner");F();return b(window).unbind("resize",h)};p=function(){d.length=0;return b(e.selector).each(function(){var a,g,c;c=new Image;g=b(this);a=g.children("img:first");c.buffer_src=g.attr("href");c.index=d.length;e.caption&&(c.caption="",a.attr("title")&&(c.caption+="<b>"+a.attr("title")+"</b><br>"),a.attr("alt")&&(c.caption+=a.attr("alt")));d.push(c);if(e.openOnClick)return g.click(function(a){a.preventDefault();e.reloadOnOpen&&p();return v(c,this)})})};E=function(){e.navigation&&(f.append('<button id="fullsized_go_prev" type="button" title="Previous"></button><button id="fullsized_go_next" type="button" title="Next"></button>'),b(document).on("click","#fullsized_go_prev",function(a){a.preventDefault();a.stopPropagation();return r()}),b(document).on("click","#fullsized_go_next",function(a){a.preventDefault();a.stopPropagation();return q()}));e.closeButton&&(f.append('<button id="fullsized_close" type="button" title="Close"></button>'),b(document).on("click","#fullsized_close",function(a){a.preventDefault();a.stopPropagation();return n()}));e.fullscreenButton&&C()&&(f.append('<button id="fullsized_fullscreen" type="button" title="Toggle fullscreen"></button>'),b(document).on("click","#fullsized_fullscreen",function(a){a.preventDefault();a.stopPropagation();return z()}));e.caption&&f.find("#fullsized_holder").append(m);switch(e.clickBehaviour){case "close":return b(document).on("click","#jquery-fullsizable",n);case "next":return b(document).on("click","#jquery-fullsizable",function(){return q(!0)});default:return b(document).on("click","#jquery-fullsizable",e.clickBehaviour)}};A=function(){b(document).bind("keydown",t);b(document).bind("fullsizable:next",function(){return q(!0)});b(document).bind("fullsizable:prev",function(){return r(!0)});return b(document).bind("fullsizable:close",n)};F=function(){b(document).unbind("keydown",t);b(document).unbind("fullsizable:next");b(document).unbind("fullsizable:prev");return b(document).unbind("fullsizable:close")};D=function(){var a;m.toggle(!1);a=f.find("button");if(!0===a.is(":visible"))return a.toggle(!1),f.bind("mousemove",u)};k=null;u=function(a){null===k&&(k=[a.clientX,a.clientY]);if(10<=Math.round(Math.sqrt(Math.pow(k[1]-a.clientY,2)+Math.pow(k[0]-a.clientX,2))))return f.unbind("mousemove",u),k=null,x()};x=function(){m.toggle(!0);b("#fullsized_close, #fullsized_fullscreen").toggle(!0);if(e.loop)return b("#fullsized_go_prev").show(),b("#fullsized_go_next").show();b("#fullsized_go_prev").toggle(0!==c);return b("#fullsized_go_next").toggle(c!==d.length-1)};b.fn.fullsizable=function(a){e=b.extend({selector:this.selector,detach_id:null,navigation:!0,closeButton:!0,fullscreenButton:!0,openOnClick:!0,clickBehaviour:"close",preload:!0,reloadOnOpen:!1,loop:!1,caption:!1},a||{});E();e.preload&&p();b(document).bind("fullsizable:reload",p);b(document).bind("fullsizable:open",function(a,c){var g,f,k,h;e.reloadOnOpen&&p();h=[];g=0;for(k=d.length;g<k;g++)f=d[g],f.buffer_src===b(c).attr("href")?h.push(v(f,c)):h.push(void 0);return h});return this};C=function(){var a;a=f.get(0);return a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen?!0:!1};B=function(){return z(!0)};z=function(a){var b;b=f.get(0);if(b.requestFullScreen)return document.fullScreen||a?document.exitFullScreen():b.requestFullScreen();if(b.webkitRequestFullScreen)return document.webkitIsFullScreen||a?document.webkitCancelFullScreen():b.webkitRequestFullScreen();if(b.mozRequestFullScreen)return document.mozFullScreen||a?document.mozCancelFullScreen():b.mozRequestFullScreen()}}).call(this);