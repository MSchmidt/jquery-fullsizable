/*
jQuery fullsizable plugin v2.1.0 <https://github.com/MSchmidt/jquery-fullsizable>
(c) 2011-2015 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var e,n,l,t,u,o,i,r,c,d,s,a,f,h,p,g,v,m,w,b,z,_,k,F,S,x,q,y;e=jQuery,o="#jquery-fullsizable",d="#fullsized_image_holder",S="fullsized_spinner",n=e('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>'),s=[],i=0,m=null,x=null,_=function(){var n;return n=s[i],null==n.ratio&&(n.ratio=(n.naturalHeight/n.naturalWidth).toFixed(2)),e(window).height()/n.ratio>e(window).width()?(e(n).width(e(window).width()),e(n).height(e(window).width()*n.ratio),e(n).css("margin-top",(e(window).height()-e(n).height())/2)):(e(n).height(e(window).height()),e(n).width(e(window).height()/n.ratio),e(n).css("margin-top",0))},a=function(e){return 27===e.keyCode&&u(),37===e.keyCode&&z(!0),39===e.keyCode?g(!0):void 0},z=function(e){return null==e&&(e=!1),i>0?F(s[i-1],-1,e):m.loop?F(s[s.length-1],-1,e):void 0},g=function(e){return null==e&&(e=!1),i<s.length-1?F(s[i+1],1,e):m.loop?F(s[0],1,e):void 0},F=function(n,l,t){return null==l&&(l=1),null==t&&(t=!1),i=n.index,e(d).hide(),e(d).html(n),m.navigation&&(t===!0?c():k()),null!=n.loaded?(e(o).removeClass(S),_(),e(d).fadeIn("fast"),w(l)):(e(o).addClass(S),n.onload=function(){return _(),e(d).fadeIn("slow",function(){return e(o).removeClass(S)}),this.loaded=!0,w(l)},n.src=n.buffer_src)},w=function(e){var n;if(1===e&&i<s.length-1)n=s[i+1];else{if(-1!==e&&i!==s.length-1||!(i>0))return;n=s[i-1]}return n.onload=function(){return this.loaded=!0},""===n.src?n.src=n.buffer_src:void 0},v=function(t,u){return e("body").append(n),e(window).bind("resize",_),F(t),e(o).hide().fadeIn(function(){return null!=m.detach_id&&(x=e(window).scrollTop(),e("#"+m.detach_id).css("display","none"),_()),l(),e(document).trigger("fullsizable:opened",u)})},u=function(){return null!=m.detach_id&&(e("#"+m.detach_id).css("display","block"),e(window).scrollTop(x)),e(o).fadeOut(function(){return n.remove()}),t(),e(o).removeClass(S),y(),e(window).unbind("resize",_)},f=function(){return s.length=0,e(m.selector).each(function(){var n;return n=new Image,n.buffer_src=e(this).attr("href"),n.index=s.length,s.push(n),m.openOnClick?e(this).click(function(e){return e.preventDefault(),m.reloadOnOpen&&f(),v(n,this)}):void 0})},b=function(){switch(m.navigation&&(n.append('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>'),e(document).on("click","#fullsized_go_prev",function(e){return e.preventDefault(),e.stopPropagation(),z()}),e(document).on("click","#fullsized_go_next",function(e){return e.preventDefault(),e.stopPropagation(),g()})),m.closeButton&&(n.append('<a id="fullsized_close" href="#close"></a>'),e(document).on("click","#fullsized_close",function(e){return e.preventDefault(),e.stopPropagation(),u()})),m.fullscreenButton&&r()&&(n.append('<a id="fullsized_fullscreen" href="#fullscreen"></a>'),e(document).on("click","#fullsized_fullscreen",function(e){return e.preventDefault(),e.stopPropagation(),q()})),m.clickBehaviour){case"close":return e(document).on("click",o,u);case"next":return e(document).on("click",o,function(){return g(!0)});default:return e(document).on("click",o,m.clickBehaviour)}},l=function(){return e(document).bind("keydown",a),e(document).bind("fullsizable:next",function(){return g(!0)}),e(document).bind("fullsizable:prev",function(){return z(!0)}),e(document).bind("fullsizable:close",u)},y=function(){return e(document).unbind("keydown",a),e(document).unbind("fullsizable:next"),e(document).unbind("fullsizable:prev"),e(document).unbind("fullsizable:close")},c=function(){var e;return e=n.find("a"),e.is(":visible")===!0?(e.toggle(!1),n.bind("mousemove",h)):void 0},p=null,h=function(e){var l;return null===p&&(p=[e.clientX,e.clientY]),l=Math.round(Math.sqrt(Math.pow(p[1]-e.clientY,2)+Math.pow(p[0]-e.clientX,2))),l>=10?(n.unbind("mousemove",h),p=null,k()):void 0},k=function(){return e("#fullsized_close, #fullsized_fullscreen").toggle(!0),m.loop?(e("#fullsized_go_prev").show(),e("#fullsized_go_next").show()):(e("#fullsized_go_prev").toggle(0!==i),e("#fullsized_go_next").toggle(i!==s.length-1))},e.fn.fullsizable=function(n){return m=e.extend({selector:this.selector,detach_id:null,navigation:!0,closeButton:!0,fullscreenButton:!0,openOnClick:!0,clickBehaviour:"close",preload:!0,reloadOnOpen:!1,loop:!1},n||{}),b(),m.preload&&f(),e(document).bind("fullsizable:reload",f),e(document).bind("fullsizable:open",function(n,l){var t,u,o,i;for(m.reloadOnOpen&&f(),i=[],u=0,o=s.length;o>u;u++)t=s[u],i.push(t.buffer_src===e(l).attr("href")?v(t,l):void 0);return i}),this},r=function(){var e;return e=n.get(0),e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen?!0:!1},t=function(){return q(!0)},q=function(e){var l;return l=n.get(0),l.requestFullScreen?document.fullScreen||e?document.exitFullScreen():l.requestFullScreen():l.webkitRequestFullScreen?document.webkitIsFullScreen||e?document.webkitCancelFullScreen():l.webkitRequestFullScreen():l.mozRequestFullScreen?document.mozFullScreen||e?document.mozCancelFullScreen():l.mozRequestFullScreen():void 0}}).call(this);
