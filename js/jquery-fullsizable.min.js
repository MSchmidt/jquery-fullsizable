/*
jQuery fullsizable plugin v2.2.0 <https://github.com/MSchmidt/jquery-fullsizable>
(c) 2011-2015 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var b,k,c,A,B,n,f,C,D,e,t,p,u,h,q,v,d,w,E,r,l,x,m,y,z,F;b=jQuery;c=b('<div id="jquery-fullsizable"><div id="fullsized_wrapper"><div id="fullsized_holder"><div id="fullsized_image_holder"></div></div></div></div>');k=b('<div id="fullsized_caption_holder"></div>');e=[];f=0;y=d=null;l=function(){var a;a=e[f];null==a.ratio&&(a.ratio=(a.naturalHeight/a.naturalWidth).toFixed(2));if(b(window).height()/a.ratio>b(window).width())return b(a).width(b(window).width()),b(a).height(b(window).width()*a.ratio),b(a).css("margin-top",(b(window).height()-b(a).height())/2);b(a).height(b(window).height());b(a).width(b(window).height()/a.ratio);return b(a).css("margin-top",0)};t=function(a){27===a.keyCode&&n();if(d.navigation&&(37===a.keyCode&&r(!0),39===a.keyCode))return q(!0)};r=function(a){null==a&&(a=!1);if(0<f)return m(e[f-1],-1,a);if(d.loop)return m(e[e.length-1],-1,a)};q=function(a){null==a&&(a=!1);if(f<e.length-1)return m(e[f+1],1,a);if(d.loop)return m(e[0],1,a)};m=function(a,g,e){null==g&&(g=1);null==e&&(e=!1);f=a.index;b("#fullsized_image_holder").hide();b("#fullsized_image_holder").html(a);d.caption&&(a.caption?(k.html(a.caption),k.css({visibility:"visible"})):k.css({visibility:"hidden"}));d.navigation&&(!0===e?D():x());if(null!=a.loaded)return b("#jquery-fullsizable").removeClass("fullsized_spinner"),l(),b("#fullsized_image_holder").fadeIn("fast"),w(g);b("#jquery-fullsizable").addClass("fullsized_spinner");a.onload=function(){l();b("#fullsized_image_holder").fadeIn("slow",function(){return b("#jquery-fullsizable").removeClass("fullsized_spinner")});this.loaded=!0;return w(g)};return a.src=a.buffer_src};w=function(a){if(1===a&&f<e.length-1)a=e[f+1];else if((-1===a||f===e.length-1)&&0<f)a=e[f-1];else return;a.onload=function(){return this.loaded=!0};if(""===a.src)return a.src=a.buffer_src};v=function(a,e){b("body").append(c);b(window).bind("resize",l);m(a);return b("#jquery-fullsizable").hide().fadeIn(function(){null!=d.detach_id&&(y=b(window).scrollTop(),b("#"+d.detach_id).css("display","none"),l());A();return b(document).trigger("fullsizable:opened",e)})};n=function(){null!=d.detach_id&&(b("#"+d.detach_id).css("display","block"),b(window).scrollTop(y));b("#jquery-fullsizable").fadeOut(function(){return c.remove()});B();b("#jquery-fullsizable").removeClass("fullsized_spinner");F();return b(window).unbind("resize",l)};p=function(){e.length=0;return d.fullsizableElements.each(function(){var a,g,c;c=new Image;g=b(this);a=g.children("img:first");c.buffer_src=g.attr("href");c.index=e.length;d.caption&&(c.caption="",a.attr("title")&&(c.caption+="<b>"+a.attr("title")+"</b><br>"),a.attr("alt")&&(c.caption+=a.attr("alt")));e.push(c);if(d.openOnClick)return g.unbind("click").click(function(a){a.preventDefault();d.reloadOnOpen&&p();return v(c,this)})})};E=function(){d.navigation&&0===c.find("#fullsized_go_prev").length&&(c.append('<button id="fullsized_go_prev" type="button" title="Previous"></button><button id="fullsized_go_next" type="button" title="Next"></button>'),b(document).on("click","#fullsized_go_prev",function(a){a.preventDefault();a.stopPropagation();return r()}),b(document).on("click","#fullsized_go_next",function(a){a.preventDefault();a.stopPropagation();return q()}));d.closeButton&&0===c.find("#fullsized_close").length&&(c.append('<button id="fullsized_close" type="button" title="Close"></button>'),b(document).on("click","#fullsized_close",function(a){a.preventDefault();a.stopPropagation();return n()}));d.fullscreenButton&&C()&&0===c.find("#fullsized_fullscreen").length&&(c.append('<button id="fullsized_fullscreen" type="button" title="Toggle fullscreen"></button>'),b(document).on("click","#fullsized_fullscreen",function(a){a.preventDefault();a.stopPropagation();return z()}));d.caption&&c.find("#fullsized_holder").append(k);switch(d.clickBehaviour){case "close":return b(document).on("click","#jquery-fullsizable",n);case "next":return b(document).on("click","#jquery-fullsizable",function(){return q(!0)});default:return b(document).on("click","#jquery-fullsizable",d.clickBehaviour)}};A=function(){b(document).bind("keydown",t);d.navigation&&(b(document).bind("fullsizable:next",function(){return q(!0)}),b(document).bind("fullsizable:prev",function(){return r(!0)}));return b(document).bind("fullsizable:close",n)};F=function(){b(document).unbind("keydown",t);d.navigation&&(b(document).unbind("fullsizable:next"),b(document).unbind("fullsizable:prev"));return b(document).unbind("fullsizable:close")};D=function(){var a;k.toggle(!1);a=c.find("button");if(!0===a.is(":visible"))return a.toggle(!1),c.bind("mousemove",u)};h=null;u=function(a){null===h&&(h=[a.clientX,a.clientY]);if(10<=Math.round(Math.sqrt(Math.pow(h[1]-a.clientY,2)+Math.pow(h[0]-a.clientX,2))))return c.unbind("mousemove",u),h=null,x()};x=function(){k.toggle(!0);b("#fullsized_close,#fullsized_fullscreen").toggle(!0);if(d.loop)return b("#fullsized_go_prev").show(),b("#fullsized_go_next").show();b("#fullsized_go_prev").toggle(0!==f);return b("#fullsized_go_next").toggle(f!==e.length-1)};b.fn.fullsizable=function(a){d=b.extend({fullsizableElements:this,detach_id:null,navigation:!0,closeButton:!0,fullscreenButton:!0,openOnClick:!0,clickBehaviour:"close",preload:!0,reloadOnOpen:!1,loop:!1,caption:!1},a||{});E();d.preload&&p();b(document).bind("fullsizable:reload",p);b(document).bind("fullsizable:open",function(a,c){var g,f,k,h;d.reloadOnOpen&&p();h=[];g=0;for(k=e.length;g<k;g++)f=e[g],f.buffer_src===b(c).attr("href")?h.push(v(f,c)):h.push(void 0);return h});return this};C=function(){var a;a=c.get(0);return a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen?!0:!1};B=function(){return z(!0)};z=function(a){var b;b=c.get(0);if(b.requestFullScreen)return document.fullScreen||a?document.exitFullScreen():b.requestFullScreen();if(b.webkitRequestFullScreen)return document.webkitIsFullScreen||a?document.webkitCancelFullScreen():b.webkitRequestFullScreen();if(b.mozRequestFullScreen)return document.mozFullScreen||a?document.mozCancelFullScreen():b.mozRequestFullScreen()}}).call(this);