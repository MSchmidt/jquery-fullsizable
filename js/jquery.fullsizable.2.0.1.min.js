/*
jQuery fullsizable plugin v2.0.1 <https://github.com/MSchmidt/jquery-fullsizable>
(c) 2011-2014 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var e,n,t,l,u,i,r,o,c,f,d,s,a,h,p,g,m,w,b,v,z,_,k,F,S,q,x,y;e=jQuery;i="#jquery-fullsizable";f="#fullsized_image_holder";S="fullsized_spinner";n=e('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>');d=[];r=0;w=null;q=null;_=function(){var n;n=d[r];if(n.ratio==null){n.ratio=(n.naturalHeight/n.naturalWidth).toFixed(2)}if(e(window).height()/n.ratio>e(window).width()){e(n).width(e(window).width());e(n).height(e(window).width()*n.ratio);return e(n).css("margin-top",(e(window).height()-e(n).height())/2)}else{e(n).height(e(window).height());e(n).width(e(window).height()/n.ratio);return e(n).css("margin-top",0)}};s=function(e){if(e.keyCode===27){u()}if(e.keyCode===37){z(true)}if(e.keyCode===39){return g(true)}};z=function(e){if(e==null){e=false}if(r>0){return F(d[r-1],-1,e)}};g=function(e){if(e==null){e=false}if(r<d.length-1){return F(d[r+1],1,e)}};F=function(n,t,l){if(t==null){t=1}if(l==null){l=false}r=n.index;e(f).hide();e(f).html(n);if(w.navigation){if(l===true){c()}else{k()}}if(n.loaded!=null){e(i).removeClass(S);_();e(f).fadeIn("fast");return b(t)}else{e(i).addClass(S);n.onload=function(){_();e(f).fadeIn("slow",function(){return e(i).removeClass(S)});this.loaded=true;return b(t)};return n.src=n.buffer_src}};b=function(e){var n;if(e===1&&r<d.length-1){n=d[r+1]}else if((e===-1||r===d.length-1)&&r>0){n=d[r-1]}else{return}n.onload=function(){return this.loaded=true};if(n.src===""){return n.src=n.buffer_src}};m=function(l){e("body").append(n);e(window).bind("resize",_);F(l);return e(i).hide().fadeIn(function(){if(w.detach_id!=null){q=e(window).scrollTop();e("#"+w.detach_id).css("display","none");_()}t();return e(document).trigger("fullsizable:opened")})};u=function(){if(w.detach_id!=null){e("#"+w.detach_id).css("display","block");e(window).scrollTop(q)}e(i).fadeOut(function(){return n.remove()});l();e(i).removeClass(S);y();return e(window).unbind("resize",_)};a=function(){d.length=0;return e(w.selector).each(function(){var n;n=new Image;n.buffer_src=e(this).attr("href");n.index=d.length;d.push(n);if(w.openOnClick){return e(this).click(function(e){e.preventDefault();if(w.reloadOnOpen){a()}return m(n)})}})};v=function(){if(w.navigation){n.append('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>');e(document).on("click","#fullsized_go_prev",function(e){e.preventDefault();e.stopPropagation();return z()});e(document).on("click","#fullsized_go_next",function(e){e.preventDefault();e.stopPropagation();return g()})}if(w.closeButton){n.append('<a id="fullsized_close" href="#close"></a>');e(document).on("click","#fullsized_close",function(e){e.preventDefault();e.stopPropagation();return u()})}if(w.fullscreenButton&&o()){n.append('<a id="fullsized_fullscreen" href="#fullscreen"></a>');e(document).on("click","#fullsized_fullscreen",function(e){e.preventDefault();e.stopPropagation();return x()})}switch(w.clickBehaviour){case"close":return e(document).on("click",i,u);case"next":return e(document).on("click",i,function(){return g(true)})}};t=function(){e(document).bind("keydown",s);e(document).bind("fullsizable:next",function(){return g(true)});e(document).bind("fullsizable:prev",function(){return z(true)});return e(document).bind("fullsizable:close",u)};y=function(){e(document).unbind("keydown",s);e(document).unbind("fullsizable:next");e(document).unbind("fullsizable:prev");return e(document).unbind("fullsizable:close")};c=function(){var e;e=n.find("a");if(e.is(":visible")===true){e.toggle(false);return n.bind("mousemove",h)}};p=null;h=function(e){var t;if(p===null){p=[e.clientX,e.clientY]}t=Math.round(Math.sqrt(Math.pow(p[1]-e.clientY,2)+Math.pow(p[0]-e.clientX,2)));if(t>=10){n.unbind("mousemove",h);p=null;return k()}};k=function(){e("#fullsized_close, #fullsized_fullscreen").toggle(true);e("#fullsized_go_prev").toggle(r!==0);return e("#fullsized_go_next").toggle(r!==d.length-1)};e.fn.fullsizable=function(n){w=e.extend({selector:this.selector,detach_id:null,navigation:true,closeButton:true,fullscreenButton:true,openOnClick:true,clickBehaviour:"close",preload:true,reloadOnOpen:false},n||{});v();if(w.preload){a()}e(document).bind("fullsizable:reload",a);e(document).bind("fullsizable:open",function(n,t){var l,u,i,r;if(w.reloadOnOpen){a()}r=[];for(u=0,i=d.length;u<i;u++){l=d[u];if(l.buffer_src===e(t).attr("href")){r.push(m(l))}else{r.push(void 0)}}return r});return this};o=function(){var e;e=n.get(0);if(e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen){return true}else{return false}};l=function(){return x(true)};x=function(e){var t;t=n.get(0);if(t.requestFullScreen){if(document.fullScreen||e){return document.exitFullScreen()}else{return t.requestFullScreen()}}else if(t.webkitRequestFullScreen){if(document.webkitIsFullScreen||e){return document.webkitCancelFullScreen()}else{return t.webkitRequestFullScreen()}}else if(t.mozRequestFullScreen){if(document.mozFullScreen||e){return document.mozCancelFullScreen()}else{return t.mozRequestFullScreen()}}}}).call(this);
